<!DOCTYPE html>
<html>

<head>
    <title>
        SOCKET IO
    </title>
</head>

<body>
    <script src="/socket.io/socket.io.js"></script>
    <div>
        <input id="textName" type="text" name="textName">
        <button id="sendBtn" onclick="beginChat()">Send</button>
        <label>Room name</label>
        <input id="roomId" type="text" name="room" autofocus>
        <button id=joinRoom onclick="joinChat()">Join</button>
        <div id="message-container">
            <h1><B>Messages</B></h1>
        </div>
        <script>
            var socket = io();
            function joinChat() {
                let roomName = document.getElementById('roomId').value;
                console.log(roomName, "<------roomName----->");
                socket.emit('joinGroup', roomName);
            }
            let msgs = '';
            socket.emit('sendMessage', 'welcome to group chat');
            function beginChat() {
                console.log('I am in client');
                msgs += document.getElementById('textName').value + '<br/>';
                document.getElementById('message-container').innerHTML = msgs;
                socket.emit('sendMessage', msgs);
            };
            socket.on('groupChatMessage', function (msg) {
                var div = document.createElement("div");
                div.innerHTML = msg;
                document.body.appendChild(div);
            });
            socket.on('welcomeMessage', function (welcome) {
                console.log('welcomeMessage', welcome);
            })
            socket.on('groupChat', function (group) {
                console.log('group-chat', group);
            })
        </script>

        <!-- <form>
            <div class="form-field">
                <h3>Join Chat</h3>
            </div>
            <div class="form-field">
                <label>Display name</label>
                <input type="text" name="name" autofocus>
            </div>
            <div class="form-field">
                <label>Room name</label>
                <input type="text" name="room" autofocus>
            </div>
            <div class="form-field">
                <button>Join</button>
            </div>
        </form> -->
    </div>
    <!-- <script type="text/javascript" src="/index.js"></script> -->
</body>

</html>